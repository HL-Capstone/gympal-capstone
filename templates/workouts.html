{% extends "base.html" %}
{% block content %}
<h1 class="h4 mb-3 d-flex align-items-center justify-content-between">
  <span>Workouts</span>
  <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('export_csv') }}">
    Download CSV
  </a>
</h1>


<form method="post" class="card card-body mb-4">
  <div class="row g-3">
    <div class="col-md-3">
      <label class="form-label">Date</label>
      <input type="date" name="date" class="form-control" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Exercise</label>
      <input list="exerciseList" name="exercise" class="form-control" placeholder="Start typing…" required>
      <datalist id="exerciseList">
        {% for name in ex_names %}
          <option value="{{ name }}"></option>
        {% endfor %}
      </datalist>
    </div>
    <div class="col-md-2">
      <label class="form-label">Reps</label>
      <input type="number" name="reps" class="form-control" min="1" required>
    </div>
    <div class="col-md-2">
      <label class="form-label">Weight</label>
      <input type="number" step="0.5" name="weight" class="form-control" min="0" required>
    </div>
    <div class="col-12">
      <label class="form-label">Notes (optional)</label>
      <input type="text" name="notes" class="form-control">
    </div>
  </div>
  <div class="mt-3">
    <button class="btn btn-primary">Add Workout</button>
  </div>
</form>

<ul class="list-group">
  {% for w, sets in workouts %}
    <li class="list-group-item">
      <div class="d-flex justify-content-between">
        <strong>{{ w.date }}</strong>
        <small class="text-muted">{{ w.notes }}</small>
      </div>
      <ul class="mt-2">
        {% for ex_name, reps, weight in sets %}
          <li>{{ ex_name }} — {{ reps }} reps @ {{ weight }}</li>
        {% endfor %}
      </ul>
    </li>
  {% else %}
    <li class="list-group-item">No workouts yet.</li>
  {% endfor %}
</ul>
{% endblock %}
